# flake8-vedro

Плагин для flake8

Игнорирование правил стандартное для flake8:
- через файл `setup.cfg` и параметра `ignore`
- через комментарий `#noqa: VS1`


## История
### Версия 0.1.0

Валидация содержимого теста (class Scenario):

1. расположение файла - в папке scenarios/
2. класс унаследован от `vedro.Scenario`
3. `subject`
    1. присутствует
    2. не пустой
4. отстуствие декоратора `@vedro.only` или `@only`

Валидация шагов сценария:

1. обязательность шагов `when`, `then`
2. нейминг шагов - допустимы все наименования, начинающиеся с `given`, `when`, `then`, `and`, `but`, а так же шаг `__init__`
3. шаги `when` / `then` присутствуют в тесте только 1 раз
4. порядок шагов
5. отсутствие использования в given шагах интерфейсов
6. в `init`, `given`, `when` остуствует ассерт
7. в шагах `then`, `and`, `but`
    1.  есть хотя бы 1 ассерт
    2. отсутствуют сравнение без ассера (типа `foo == var`)

Валидация параметризированного теста

1. если параметризаций >=2, `subject` содержит подстановку
2. в `@params` не используются прямой вызов методов
3. в `@``params` не более N параметров, где N задается в конфиге

   N задается в конфигурационном файле `setup.cfg` параметром `scenario_params_max_count`, пример:
   ```
   [flake8]
   max_line_length = 119
   exclude = .git, .venv, venv, _files
   scenario_params_max_count = 3
   ```

А так же всех файлов по правилам:

1. отсутствие вызова `sleep` с константным аргументом
2. отсутствие вызова `print` или `pp`
3. отсутствие ассертов, в которых сравниваются одни и те же объекты (`assert foo == foo`)
4. отсутствие ассертов, в которых что-то сравнивается с константами (`assert foo == 1`)
5. наличие типизации для аргументов функции и выходного параметра